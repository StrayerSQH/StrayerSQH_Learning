# 有向无环图DAG
## 1.介绍
有向无环图(DAG）是有节点和单向箭头组成的。\
\
每一个节点表示一个变量，“有向”是指以单向箭头表示变量之间的因果关系，“无环”是指无法从某一个节点出发沿着箭头方向回到原节点，形成一个闭环。
![image](https://github.com/StrayerSQH/Learning/blob/main/%E7%AE%97%E6%B3%95/PHOTO/DAG_0.png)
如果引入时间角标，则可以使用DAG表示联立性问题和反向因果。\
\
DAG从反事实的角度解释因果关系。也就是说，因果效应被定义为世界两种状态之间的比较：\
1.当某种敢于具有某种价值时实际发生的桩体\
2.在干预没有发生的状态（“反事实”）。
## 2.三种基本路径
### 因果路径（直接因果路径和间接因果路径）
如下图所示。从X到Y有两条路：
![image](https://github.com/StrayerSQH/Learning/blob/main/%E7%AE%97%E6%B3%95/PHOTO/DAG_1.png)
一条是直接从X --> Y,称为直接因果路径；另外一条是X --> A --> Y,称为间接因果路径。\
**注意：在回归问题中，如果我们将A变量进行控制，例如将A进行关闭，则路径X --> A --> Y无法进行通行，要从X到Y只能走X --> Y路径，则此时估计出来的效应称之为直接因果效应。如果未控制A关闭，则依旧有两条路从X到Y，则估计出来的效应既有直接因果效应，也有间接因果效应，是一个综合的因果效应。** 
### 混淆路径
混淆路径与对撞路径统称为**后门路径**。
如下图所示：
![image](https://github.com/StrayerSQH/Learning/blob/main/%E7%AE%97%E6%B3%95/PHOTO/DAG_3.png)
如果在不考虑箭头的方向的话，可以通过X -- C -- W -- Y的方式到达Y，为于同一条线上。对于如何判断是否为混淆路径，查看是否有一个变量为混淆因子，即其处的箭头方向向着“两边”。在这里，C即为混淆因子。\
**注意：对于混淆因子本身来说，其是开着门的，所以X既可以走前门到Y，也可以走后门到Y。** 然而，我们希望估计的是直接因果效应，所以应该将C这里的后门堵死，将其控制。
### 对撞路径
如下图所示：
![image](https://github.com/StrayerSQH/Learning/blob/main/%E7%AE%97%E6%B3%95/PHOTO/DAG_4.png)
不难理解对撞因子的 **--> C <--** 的含义。**注意：对撞路径无法进行控制，是被封死的。A和B没有直接因果效应**
\
如果一条路径上既有混淆因子，又有对撞因子，则成为对撞路径，因为这条路径的后门，被对撞因子封死了。\
**一个好的设计，就是关上所有的后门，只要满足这条要求，就可以识别因果效应。** 
## 3.例举
### 超级快递点
多多快递站共有n个快递点，n个快递点之间通过m条单向车道连接。快递员从任何一个快递站点出发，都无法通过单向车道回到该站点。也就是说，n个快递点组成一张有向无环图。对于快递点u，如果对于所有的快递点 v(v != u)， 快递员都可以从u走到v，或者从v走到u，那么则评定站点u为超级快递点。请你帮忙算一算，一共有多少个超级快递点。
### 输入描述
第一行 2个数字n(2 <= n <= 3 * 10 ^ 5) , m(1 <= m <= 3 * 10 ^ 5) , n为快递点个数，m为单向车道个数。
接下来的m行每行两个数字 u,v(1<=u,v<=n, v!=u)，表示有一条站点u指向v的单向车道。
输出描述
请输出个数字，表示超级快递点的个数。
示例 1
### 输入
```
7 7
1 2
2 3
3 4
4 7
2 5
5 4
6 4
```
### 输出
```
2
```
### 说明
快递点 4 可以到达 4，7，可以从1，2，3，5，6 到达， 评为超级快递点 快递点 7 可以到达 7，可以从 1，2，3，4，5，6到达，评为超级快递点

